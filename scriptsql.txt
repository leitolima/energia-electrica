CREATE TABLE usuarios (
    id int(11) AUTO_INCREMENT PRIMARY KEY,
    usuario varchar(25) NOT NULL,
    clave varchar(255) NOT NULL,
    id_empleado_fk int(11) NOT NULL,
    id_nivel_fk int(2) NOT NULL,
    activo tinyint NOT NULL DEFAULT 1,
    borrado tinyint NOT NULL DEFAULT 0
);
CREATE TABLE empleados (
    id int(11) AUTO_INCREMENT PRIMARY KEY,
    nombre varchar(75) NOT NULL,
    fecha_nac date,
    dni varchar(8) NOT NULL,
    email varchar(150) NOT NULL,
    telefono varchar(25),
    borrado tinyint NOT NULL DEFAULT 0
);
CREATE TABLE niveles (
    id int(11) AUTO_INCREMENT PRIMARY KEY,
    titulo varchar(25) NOT NULL
);

CREATE TABLE ayuda (
    id int(11) AUTO_INCREMENT PRIMARY KEY,
    menu int(11) NOT NULL,
    titulo varchar(25) NOT NULL
);
CREATE TABLE accesos (
    id_usuario_fk int(11) NOT NULL,
    menu_ayuda_fk int(11) NOT NULL,
    a tinyint NOT NULL,
    b tinyint NOT NULL,
    m tinyint NOT NULL,
    c tinyint NOT NULL
);

CREATE TABLE centrales (
    id int(11) AUTO_INCREMENT PRIMARY KEY,
    nombre varchar(100) NOT NULL,
    prod_media float NOT NULL,
    prod_maxima float NOT NULL,
    fecha_func date,
    id_central int(11) NOT NULL,
    tipo_central_fk int(11) NOT NULL,
    borrado tinyint NOT NULL DEFAULT 0
);
CREATE TABLE tipo_central (
    id int(1) PRIMARY KEY,
    tipo varchar(14) NOT NULL
);
CREATE TABLE solar (
    id int(11) AUTO_INCREMENT PRIMARY KEY,
    sup_paneles float NOT NULL,
    media_hs_sol float NOT NULL,
    tipo_panel tinyint(4) NOT NULL
);
CREATE TABLE termica (
    id int(11) AUTO_INCREMENT PRIMARY KEY,
    num_hornos int(4) NOT NULL,
    vol_carbon_consum float NOT NULL,
    vol_emision_gases float NOT NULL
);
CREATE TABLE hidroelectrica (
    id int(11) AUTO_INCREMENT PRIMARY KEY,
    ocupacion int(10) NOT NULL,
    capacidad int(10) NOT NULL,
    num_turbinas int(10) NOT NULL
);
CREATE TABLE nuclear (
    id int(11) AUTO_INCREMENT PRIMARY KEY,
    num_reactores int(10) NOT NULL,
    vol_plut_consum float NOT NULL,
    vol_residuo float NOT NULL
);
CREATE TABLE transportista (
    id int(11) AUTO_INCREMENT PRIMARY KEY,
    nombre varchar(100) NOT NULL,
    matricula int(15) NOT NULL
);
CREATE TABLE suministro (
    id int(11) AUTO_INCREMENT PRIMARY KEY,
    nombre varchar(100) NOT NULL,
    pais varchar(75) NOT NULL,
    id_nuclear_fk int(11) NOT NULL,
    cant_plutonio float NOT NULL,
    id_transportista_fk int(11) NOT NULL,
    fecha date
);

CREATE TABLE estaciones (
    id int(11) AUTO_INCREMENT PRIMARY KEY,
    nombre varchar(100) NOT NULL,
    borrado tinyint NOT NULL DEFAULT 0
);
CREATE TABLE transformadores (
    id int(11) AUTO_INCREMENT PRIMARY KEY,
    id_estacion_fk int(11) NOT NULL,
    borrado tinyint NOT NULL DEFAULT 0
);
CREATE TABLE redes (
    id int(11) AUTO_INCREMENT PRIMARY KEY,
    numero int(11) NOT NULL,
    id_estacion_fk int(11) NOT NULL,
    borrado tinyint NOT NULL DEFAULT 0
);
CREATE TABLE companias (
    id int(11) AUTO_INCREMENT PRIMARY KEY,
    nombre varchar(100) NOT NULL,
    borrado tinyint NOT NULL DEFAULT 0
);
CREATE TABLE propiedad_red (
    numero_red_fk int(11) NOT NULL,
    id_compania_fk int(11) NOT NULL
);
CREATE TABLE lineas (
    id int(11) AUTO_INCREMENT PRIMARY KEY,
    numero_red_sec int(11) NOT NULL,
    longitud float NOT NULL,
    subestaciones int(11) NOT NULL DEFAULT 0,
    borrado tinyint NOT NULL DEFAULT 0
);
CREATE TABLE subestaciones (
    id int(11) AUTO_INCREMENT PRIMARY KEY,
    id_linea_fk int(11) NOT NULL,
    borrado tinyint NOT NULL DEFAULT 0
);
CREATE TABLE provincias (
    id int(11) AUTO_INCREMENT PRIMARY KEY,
    codigo varchar(10) NOT NULL,
    nombre varchar(100) NOT NULL,
    borrado tinyint NOT NULL DEFAULT 0
);
CREATE TABLE zonas_servicio (
    id int(11) AUTO_INCREMENT PRIMARY KEY,
    nombre varchar(100) NOT NULL,
    id_provincia_fk int(11) NOT NULL,
    borrado tinyint NOT NULL DEFAULT 0
);
CREATE TABLE zona_abastecida (
    id_zona_fk int(11) NOT NULL,
    id_subestacion_fk int(11) NOT NULL
);

CREATE TABLE borro (
    id int(11) AUTO_INCREMENT PRIMARY KEY,
    usuario varchar(25) NOT NULL,
    titulo varchar(100) NOT NULL,
    fecha date,
    tabla varchar(50) NOT NULL,
    id_tabla int(11) NOT NULL,
    central tinyint NOT NULL DEFAULT 0,
    id_centrales_fk int(11) NOT NULL DEFAULT 0
);

ALTER TABLE transformadores ADD codigo varchar(25) DEFAULT NULL;
ALTER TABLE centrales ADD id_provincia_fk int(11) NOT NULL;
ALTER TABLE estaciones ADD id_central_fk int(11) NOT NULL, ADD id_provincia_fk int(11) NOT NULL;
ALTER TABLE subestaciones ADD id_provincia_fk int(11) NOT NULL;